<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>å¯è§†åŒ–æ‹–æ‹½ç»„ä»¶åº“ä¸€äº›æŠ€æœ¯è¦ç‚¹åŸç†åˆ†æï¼ˆä¸€ï¼‰ | LuYu&#39;s Blog</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://blog.luyu.icu/favicon.ico?v=1616863320816">
<link rel="stylesheet" href="https://blog.luyu.icu/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="æœ¬æ–‡æ‘˜è‡ªæ˜é‡‘,å†™çš„å¾ˆå¥½æŠ„å½•ä¸€ä¸‹ã€‚å»ºè®®å¤šå»ç»™åŸä½œè€…ç‚¹èµğŸ‘
æœ¬æ–‡ä¸»è¦å¯¹ä»¥ä¸‹æŠ€æœ¯è¦ç‚¹è¿›è¡Œåˆ†æï¼š

ç¼–è¾‘å™¨
è‡ªå®šä¹‰ç»„ä»¶
æ‹–æ‹½
åˆ é™¤ç»„ä»¶ã€è°ƒæ•´å›¾å±‚å±‚çº§
æ”¾å¤§ç¼©å°
æ’¤æ¶ˆã€é‡åš
ç»„ä»¶å±æ€§è®¾ç½®
å¸é™„
é¢„è§ˆã€ä¿å­˜ä»£ç 
ç»‘å®šäº‹ä»¶
ç»‘å®šåŠ¨ç”»
å¯¼å…¥ PSD
æ‰‹æœº..." />
    <meta name="keywords" content="vue" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://blog.luyu.icu">
        <img src="https://blog.luyu.icu/images/avatar.png?v=1616863320816" class="site-logo">
        <h1 class="site-title">LuYu&#39;s Blog</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/panyu97py" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://blog.luyu.icu/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">å¯è§†åŒ–æ‹–æ‹½ç»„ä»¶åº“ä¸€äº›æŠ€æœ¯è¦ç‚¹åŸç†åˆ†æï¼ˆä¸€ï¼‰</h2>
            <div class="post-date">2021-02-17</div>
            
            <div class="post-content" v-pre>
              <p>æœ¬æ–‡æ‘˜è‡ª<a href="https://juejin.cn/post/6908502083075325959">æ˜é‡‘</a>,å†™çš„å¾ˆå¥½æŠ„å½•ä¸€ä¸‹ã€‚å»ºè®®å¤šå»ç»™åŸä½œè€…ç‚¹èµğŸ‘</p>
<p>æœ¬æ–‡ä¸»è¦å¯¹ä»¥ä¸‹æŠ€æœ¯è¦ç‚¹è¿›è¡Œåˆ†æï¼š</p>
<ol>
<li>ç¼–è¾‘å™¨</li>
<li>è‡ªå®šä¹‰ç»„ä»¶</li>
<li>æ‹–æ‹½</li>
<li>åˆ é™¤ç»„ä»¶ã€è°ƒæ•´å›¾å±‚å±‚çº§</li>
<li>æ”¾å¤§ç¼©å°</li>
<li>æ’¤æ¶ˆã€é‡åš</li>
<li>ç»„ä»¶å±æ€§è®¾ç½®</li>
<li>å¸é™„</li>
<li>é¢„è§ˆã€ä¿å­˜ä»£ç </li>
<li>ç»‘å®šäº‹ä»¶</li>
<li>ç»‘å®šåŠ¨ç”»</li>
<li>å¯¼å…¥ PSD</li>
<li>æ‰‹æœºæ¨¡å¼</li>
</ol>
<p>ä¸ºäº†è®©æœ¬æ–‡æ›´åŠ å®¹æ˜“ç†è§£ï¼Œæˆ‘å°†ä»¥ä¸ŠæŠ€æœ¯è¦ç‚¹ç»“åˆåœ¨ä¸€èµ·å†™äº†ä¸€ä¸ªå¯è§†åŒ–æ‹–æ‹½ç»„ä»¶åº“ DEMOï¼š</p>
<p><a href="https://github.com/woai3c/visual-drag-demo">github é¡¹ç›®åœ°å€</a></p>
<p><a href="https://woai3c.github.io/visual-drag-demo/#/">åœ¨çº¿é¢„è§ˆ</a></p>
<p>å»ºè®®ç»“åˆæºç ä¸€èµ·é˜…è¯»ï¼Œæ•ˆæœæ›´å¥½ï¼ˆè¿™ä¸ª DEMO ä½¿ç”¨çš„æ˜¯ Vue æŠ€æœ¯æ ˆï¼‰ã€‚</p>
<h3 id="1-ç¼–è¾‘å™¨">1. ç¼–è¾‘å™¨</h3>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹é¡µé¢çš„æ•´ä½“ç»“æ„ã€‚<br>
<img src="https://blog.luyu.icu/post-images/1613497344188.png" alt="" loading="lazy"></p>
<p>è¿™ä¸€èŠ‚è¦è®²çš„ç¼–è¾‘å™¨å…¶å®å°±æ˜¯ä¸­é—´çš„ç”»å¸ƒã€‚å®ƒçš„ä½œç”¨æ˜¯ï¼šå½“ä»å·¦è¾¹ç»„ä»¶åˆ—è¡¨æ‹–æ‹½å‡ºä¸€ä¸ªç»„ä»¶æ”¾åˆ°ç”»å¸ƒä¸­æ—¶ï¼Œç”»å¸ƒè¦æŠŠè¿™ä¸ªç»„ä»¶æ¸²æŸ“å‡ºæ¥ã€‚<br>
è¿™ä¸ªç¼–è¾‘å™¨çš„å®ç°æ€è·¯æ˜¯ï¼š</p>
<p>ç”¨ä¸€ä¸ªæ•°ç»„ <code>componentData</code> ç»´æŠ¤ç¼–è¾‘å™¨ä¸­çš„æ•°æ®ã€‚<br>
æŠŠç»„ä»¶æ‹–æ‹½åˆ°ç”»å¸ƒä¸­æ—¶ï¼Œä½¿ç”¨ <code>push()</code> æ–¹æ³•å°†æ–°çš„ç»„ä»¶æ•°æ®æ·»åŠ åˆ° <code>componentData</code>ã€‚<br>
ç¼–è¾‘å™¨ä½¿ç”¨ <code>v-for</code> æŒ‡ä»¤éå† <code>componentData</code>ï¼Œå°†æ¯ä¸ªç»„ä»¶é€ä¸ªæ¸²æŸ“åˆ°ç”»å¸ƒï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ <code>JSX</code>è¯­æ³•ç»“åˆ <code>render()</code> æ–¹æ³•ä»£æ›¿ï¼‰ã€‚</p>
<p>ç¼–è¾‘å™¨æ¸²æŸ“çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="language-js">&lt;component 
  v-for=&quot;item in componentData&quot;
  :key=&quot;item.id&quot;
  :is=&quot;item.component&quot;
  :style=&quot;item.style&quot;
  :propValue=&quot;item.propValue&quot;
/&gt;
</code></pre>
<p>æ¯ä¸ªç»„ä»¶æ•°æ®å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="language-js">{
    component: 'v-text', // ç»„ä»¶åç§°ï¼Œéœ€è¦æå‰æ³¨å†Œåˆ° Vue
    label: 'æ–‡å­—', // å·¦ä¾§ç»„ä»¶åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„åå­—
    propValue: 'æ–‡å­—', // ç»„ä»¶æ‰€ä½¿ç”¨çš„å€¼
    icon: 'el-icon-edit', // å·¦ä¾§ç»„ä»¶åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„åå­—
    animations: [], // åŠ¨ç”»åˆ—è¡¨
    events: {}, // äº‹ä»¶åˆ—è¡¨
    style: { // ç»„ä»¶æ ·å¼
        width: 200,
        height: 33,
        fontSize: 14,
        fontWeight: 500,
        lineHeight: '',
        letterSpacing: 0,
        textAlign: '',
        color: '',
    },
}
</code></pre>
<p>åœ¨éå† <code>componentData</code> ç»„ä»¶æ•°æ®æ—¶ï¼Œä¸»è¦é  <code>is</code> å±æ€§æ¥è¯†åˆ«å‡ºçœŸæ­£è¦æ¸²æŸ“çš„æ˜¯å“ªä¸ªç»„ä»¶ã€‚<br>
ä¾‹å¦‚è¦æ¸²æŸ“çš„ç»„ä»¶æ•°æ®æ˜¯<code>{ component: 'v-text' }</code>ï¼Œåˆ™ <code>&lt;component :is=&quot;item.component&quot; /&gt;</code>ä¼šè¢«è½¬æ¢ä¸º <code>&lt;v-text /&gt;</code>ã€‚å½“ç„¶ï¼Œä½ è¿™ä¸ªç»„ä»¶ä¹Ÿè¦æå‰æ³¨å†Œåˆ° Vue ä¸­ã€‚<br>
å¦‚æœä½ æƒ³äº†è§£æ›´å¤š is å±æ€§çš„èµ„æ–™ï¼Œè¯·æŸ¥çœ‹<a href="https://cn.vuejs.org/v2/api/#is">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h3 id="2-è‡ªå®šä¹‰ç»„ä»¶">2. è‡ªå®šä¹‰ç»„ä»¶</h3>
<p>åŸåˆ™ä¸Šä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†å»ºè®®ä½ æœ€å¥½å°è£…ä¸€ä¸‹ã€‚ä¸ç®¡æ˜¯ç¬¬ä¸‰æ–¹ç»„ä»¶è¿˜æ˜¯è‡ªå®šä¹‰ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶æ‰€éœ€çš„å±æ€§å¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æ¯ä¸ªç»„ä»¶æ•°æ®å¯ä»¥æš´éœ²å‡ºä¸€ä¸ªå±æ€§ <code>propValue</code> ç”¨äºä¼ é€’å€¼ã€‚<br>
ä¾‹å¦‚ a ç»„ä»¶åªéœ€è¦ä¸€ä¸ªå±æ€§ï¼Œä½ çš„ <code>propValue</code> å¯ä»¥è¿™æ ·å†™ï¼š<code>propValue: 'aaa'</code>ã€‚å¦‚æœéœ€è¦å¤šä¸ªå±æ€§ï¼Œ<code>propValue</code> åˆ™å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼š</p>
<pre><code class="language-js">propValue: {
  a: 1,
  b: 'text'
}
</code></pre>
<p>åœ¨è¿™ä¸ª DEMO ç»„ä»¶åº“ä¸­æˆ‘å®šä¹‰äº†ä¸‰ä¸ªç»„ä»¶ã€‚</p>
<p>å›¾ç‰‡ç»„ä»¶ Pictureï¼š</p>
<pre><code class="language-js">&lt;template&gt;
    &lt;div style=&quot;overflow: hidden&quot;&gt;
        &lt;img :src=&quot;propValue&quot;&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    props: {
        propValue: {
            type: String,
            require: true,
        },
    },
}
&lt;/script&gt;
</code></pre>
<p>æŒ‰é’®ç»„ä»¶ <code>VButton</code>:</p>
<pre><code class="language-js">&lt;template&gt;
    &lt;button class=&quot;v-button&quot;&gt;{{ propValue }}&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    props: {
        propValue: {
            type: String,
            default: '',
        },
    },
}
&lt;/script&gt;
</code></pre>
<p>æ–‡æœ¬ç»„ä»¶ <code>VText</code>:</p>
<pre><code class="language-js">&lt;template&gt;
    &lt;textarea 
        v-if=&quot;editMode == 'edit'&quot;
        :value=&quot;propValue&quot;
        class=&quot;text textarea&quot;
        @input=&quot;handleInput&quot;
        ref=&quot;v-text&quot;
    &gt;&lt;/textarea&gt;
    &lt;div v-else class=&quot;text disabled&quot;&gt;
        &lt;div v-for=&quot;(text, index) in propValue.split('\n')&quot; :key=&quot;index&quot;&gt;{{ text }}&lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { mapState } from 'vuex'

export default {
    props: {
        propValue: {
            type: String,
        },
        element: {
            type: Object,
        },
    },
    computed: mapState([
        'editMode',
    ]),
    methods: {
        handleInput(e) {
            this.$emit('input', this.element, e.target.value)
        },
    },
}
&lt;/script&gt;
</code></pre>
<h3 id="3-æ‹–æ‹½">3. æ‹–æ‹½</h3>
<h4 id="ä»ç»„ä»¶åˆ—è¡¨åˆ°ç”»å¸ƒ">ä»ç»„ä»¶åˆ—è¡¨åˆ°ç”»å¸ƒ</h4>
<p>ä¸€ä¸ªå…ƒç´ å¦‚æœè¦è®¾ä¸ºå¯æ‹–æ‹½ï¼Œå¿…é¡»ç»™å®ƒæ·»åŠ ä¸€ä¸ª <code>draggable</code> å±æ€§ã€‚å¦å¤–ï¼Œåœ¨å°†ç»„ä»¶åˆ—è¡¨ä¸­çš„ç»„ä»¶æ‹–æ‹½åˆ°ç”»å¸ƒä¸­ï¼Œè¿˜æœ‰ä¸¤ä¸ªäº‹ä»¶æ˜¯èµ·åˆ°å…³é”®ä½œç”¨çš„ï¼š</p>
<p><code>dragstart</code> äº‹ä»¶ï¼Œåœ¨æ‹–æ‹½åˆšå¼€å§‹æ—¶è§¦å‘ã€‚å®ƒä¸»è¦ç”¨äºå°†æ‹–æ‹½çš„ç»„ä»¶ä¿¡æ¯ä¼ é€’ç»™ç”»å¸ƒã€‚<br>
<code>drop</code> äº‹ä»¶ï¼Œåœ¨æ‹–æ‹½ç»“æŸæ—¶è§¦å‘ã€‚ä¸»è¦ç”¨äºæ¥æ”¶æ‹–æ‹½çš„ç»„ä»¶ä¿¡æ¯ã€‚</p>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹å·¦ä¾§ç»„ä»¶åˆ—è¡¨çš„ä»£ç ï¼š</p>
<pre><code class="language-html">&lt;div @dragstart=&quot;handleDragStart&quot; class=&quot;component-list&quot;&gt;
    &lt;div v-for=&quot;(item, index) in componentList&quot; :key=&quot;index&quot; class=&quot;list&quot; draggable :data-index=&quot;index&quot;&gt;
        &lt;i :class=&quot;item.icon&quot;&gt;&lt;/i&gt;
        &lt;span&gt;{{ item.label }}&lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="language-js">handleDragStart(e) {
    e.dataTransfer.setData('index', e.target.dataset.index)
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ç»™åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªç»„ä»¶éƒ½è®¾ç½®äº† <code>draggable</code> å±æ€§ã€‚å¦å¤–ï¼Œåœ¨è§¦å‘ <code>dragstart</code>äº‹ä»¶æ—¶ï¼Œä½¿ç”¨ <code>dataTransfer.setData()</code> ä¼ è¾“æ•°æ®ã€‚å†æ¥çœ‹ä¸€ä¸‹æ¥æ”¶æ•°æ®çš„ä»£ç ï¼š</p>
<pre><code class="language-html">&lt;div class=&quot;content&quot; @drop=&quot;handleDrop&quot; @dragover=&quot;handleDragOver&quot; @click=&quot;deselectCurComponent&quot;&gt;
    &lt;Editor /&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="language-js">handleDrop(e) {
    e.preventDefault()
    e.stopPropagation()
    const component = deepCopy(componentList[e.dataTransfer.getData('index')])
    this.$store.commit('addComponent', component)
}
</code></pre>
<p>è§¦å‘ <code>drop</code> äº‹ä»¶æ—¶ï¼Œä½¿ç”¨ <code>dataTransfer.getData()</code> æ¥æ”¶ä¼ è¾“è¿‡æ¥çš„ç´¢å¼•æ•°æ®ï¼Œç„¶åæ ¹æ®ç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶æ•°æ®ï¼Œå†æ·»åŠ åˆ°ç”»å¸ƒï¼Œä»è€Œæ¸²æŸ“ç»„ä»¶ã€‚<br>
<img src="https://blog.luyu.icu/post-images/1613497886196.gif" alt="" loading="lazy"></p>
<h4 id="ç»„ä»¶åœ¨ç”»å¸ƒä¸­ç§»åŠ¨">ç»„ä»¶åœ¨ç”»å¸ƒä¸­ç§»åŠ¨</h4>
<p>é¦–å…ˆéœ€è¦å°†ç”»å¸ƒè®¾ä¸ºç›¸å¯¹å®šä½ <code>position: relative</code>ï¼Œç„¶åå°†æ¯ä¸ªç»„ä»¶è®¾ä¸ºç»å¯¹å®šä½ <code>position: absolute</code>ã€‚é™¤äº†è¿™ä¸€ç‚¹å¤–ï¼Œè¿˜è¦é€šè¿‡ç›‘å¬ä¸‰ä¸ªäº‹ä»¶æ¥è¿›è¡Œç§»åŠ¨ï¼š</p>
<ol>
<li><code>mousedown</code> äº‹ä»¶ï¼Œåœ¨ç»„ä»¶ä¸ŠæŒ‰ä¸‹é¼ æ ‡æ—¶ï¼Œè®°å½•ç»„ä»¶å½“å‰çš„ä½ç½®ï¼Œå³ xy åæ ‡ï¼ˆä¸ºäº†æ–¹ä¾¿è®²è§£ï¼Œè¿™é‡Œä½¿ç”¨çš„åæ ‡è½´ï¼Œå®é™…ä¸Š xy å¯¹åº”çš„æ˜¯ css ä¸­çš„ left å’Œ topã€‚</li>
<li><code>mousemove</code> äº‹ä»¶ï¼Œæ¯æ¬¡é¼ æ ‡ç§»åŠ¨æ—¶ï¼Œéƒ½ç”¨å½“å‰æœ€æ–°çš„ xy åæ ‡å‡å»æœ€å¼€å§‹çš„ xy åæ ‡ï¼Œä»è€Œè®¡ç®—å‡ºç§»åŠ¨è·ç¦»ï¼Œå†æ”¹å˜ç»„ä»¶ä½ç½®ã€‚</li>
<li><code>mouseup</code> äº‹ä»¶ï¼Œé¼ æ ‡æŠ¬èµ·æ—¶ç»“æŸç§»åŠ¨ã€‚</li>
</ol>
<pre><code class="language-js">handleMouseDown(e) {
    e.stopPropagation()
    this.$store.commit('setCurComponent', { component: this.element, zIndex: this.zIndex })

    const pos = { ...this.defaultStyle }
    const startY = e.clientY
    const startX = e.clientX
    // å¦‚æœç›´æ¥ä¿®æ”¹å±æ€§ï¼Œå€¼çš„ç±»å‹ä¼šå˜ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¦è½¬ä¸ºæ•°å€¼å‹
    const startTop = Number(pos.top)
    const startLeft = Number(pos.left)

    const move = (moveEvent) =&gt; {
        const currX = moveEvent.clientX
        const currY = moveEvent.clientY
        pos.top = currY - startY + startTop
        pos.left = currX - startX + startLeft
        // ä¿®æ”¹å½“å‰ç»„ä»¶æ ·å¼
        this.$store.commit('setShapeStyle', pos)
    }

    const up = () =&gt; {
        document.removeEventListener('mousemove', move)
        document.removeEventListener('mouseup', up)
    }

    document.addEventListener('mousemove', move)
    document.addEventListener('mouseup', up)
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://blog.luyu.icu/post-images/1613498024998.gif" alt="" loading="lazy"></figure>
<h3 id="4-åˆ é™¤ç»„ä»¶-è°ƒæ•´å›¾å±‚å±‚çº§">4. åˆ é™¤ç»„ä»¶ã€è°ƒæ•´å›¾å±‚å±‚çº§</h3>
<h4 id="æ”¹å˜å›¾å±‚å±‚çº§">æ”¹å˜å›¾å±‚å±‚çº§</h4>
<p>ç”±äºæ‹–æ‹½ç»„ä»¶åˆ°ç”»å¸ƒä¸­æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œæ‰€ä»¥å¯ä»¥æŒ‰ç…§æ•°æ®é¡ºåºæ¥åˆ†é…å›¾å±‚å±‚çº§ã€‚<br>
ä¾‹å¦‚ç”»å¸ƒæ–°å¢äº†äº”ä¸ªç»„ä»¶ abcdeï¼Œé‚£å®ƒä»¬åœ¨ç”»å¸ƒæ•°æ®ä¸­çš„é¡ºåºä¸º <code>[a, b, c, d, e]</code>ï¼Œå›¾å±‚å±‚çº§å’Œç´¢å¼•ä¸€ä¸€å¯¹åº”ï¼Œå³å®ƒä»¬çš„ <code>z-index</code> å±æ€§å€¼æ˜¯ 01234ï¼ˆåæ¥å±…ä¸Šï¼‰ã€‚ç”¨ä»£ç è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code class="language-html">&lt;div v-for=&quot;(item, index) in componentData&quot; :zIndex=&quot;index&quot;&gt;&lt;/div&gt;
</code></pre>
<p>å¦‚æœä¸äº†è§£ z-index å±æ€§çš„ï¼Œè¯·çœ‹ä¸€ä¸‹ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/z-index">MDN æ–‡æ¡£</a>ã€‚</p>
<p>ç†è§£äº†è¿™ä¸€ç‚¹ä¹‹åï¼Œæ”¹å˜å›¾å±‚å±‚çº§å°±å¾ˆå®¹æ˜“åšåˆ°äº†ã€‚æ”¹å˜å›¾å±‚å±‚çº§ï¼Œå³æ˜¯æ”¹å˜ç»„ä»¶æ•°æ®åœ¨ <code>componentData</code>æ•°ç»„ä¸­çš„é¡ºåºã€‚ä¾‹å¦‚æœ‰<code>[a, b, c]</code>ä¸‰ä¸ªç»„ä»¶ï¼Œå®ƒä»¬çš„å›¾å±‚å±‚çº§ä»ä½åˆ°é«˜é¡ºåºä¸º abcï¼ˆç´¢å¼•è¶Šå¤§ï¼Œå±‚çº§è¶Šé«˜ï¼‰ã€‚<br>
å¦‚æœè¦å°† b ç»„ä»¶ä¸Šç§»ï¼Œåªéœ€å°†å®ƒå’Œ c è°ƒæ¢é¡ºåºå³å¯ï¼š</p>
<pre><code class="language-js">const temp = componentData[1]
componentData[1] = componentData[2]
componentData[2] = temp
</code></pre>
<p>åŒç†ï¼Œç½®é¡¶ç½®åº•ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¾‹å¦‚æˆ‘è¦å°† a ç»„ä»¶ç½®é¡¶ï¼Œåªéœ€å°† a å’Œæœ€åä¸€ä¸ªç»„ä»¶è°ƒæ¢é¡ºåºå³å¯ï¼š</p>
<pre><code class="language-js">const temp = componentData[0]
componentData[0] = componentData[componentData.lenght - 1]
componentData[componentData.lenght - 1] = temp
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://blog.luyu.icu/post-images/1613498228508.gif" alt="" loading="lazy"></figure>
<h4 id="åˆ é™¤ç»„ä»¶">åˆ é™¤ç»„ä»¶</h4>
<p>åˆ é™¤ç»„ä»¶éå¸¸ç®€å•ï¼Œä¸€è¡Œä»£ç æå®šï¼š<code>componentData.splice(index, 1)</code>ã€‚<br>
<img src="https://blog.luyu.icu/post-images/1613498335942.gif" alt="" loading="lazy"></p>
<h3 id="5-æ”¾å¤§ç¼©å°">5. æ”¾å¤§ç¼©å°</h3>
<p>ç»†å¿ƒçš„ç½‘å‹å¯èƒ½ä¼šå‘ç°ï¼Œç‚¹å‡»ç”»å¸ƒä¸Šçš„ç»„ä»¶æ—¶ï¼Œç»„ä»¶ä¸Šä¼šå‡ºç° 8 ä¸ªå°åœ†ç‚¹ã€‚è¿™ 8 ä¸ªå°åœ†ç‚¹å°±æ˜¯ç”¨æ¥æ”¾å¤§ç¼©å°ç”¨çš„ã€‚å®ç°åŸç†å¦‚ä¸‹ï¼š</p>
<h4 id="1-åœ¨æ¯ä¸ªç»„ä»¶å¤–é¢åŒ…ä¸€å±‚-shapeç»„ä»¶shape-ç»„ä»¶é‡ŒåŒ…å«-8-ä¸ªå°åœ†ç‚¹å’Œä¸€ä¸ª-slotæ’æ§½ç”¨äºæ”¾ç½®ç»„ä»¶">1. åœ¨æ¯ä¸ªç»„ä»¶å¤–é¢åŒ…ä¸€å±‚ <code>Shape</code>ç»„ä»¶ï¼Œ<code>Shape</code> ç»„ä»¶é‡ŒåŒ…å« 8 ä¸ªå°åœ†ç‚¹å’Œä¸€ä¸ª <code>&lt;slot&gt;</code>æ’æ§½ï¼Œç”¨äºæ”¾ç½®ç»„ä»¶ã€‚</h4>
<pre><code class="language-html">&lt;!--é¡µé¢ç»„ä»¶åˆ—è¡¨å±•ç¤º--&gt;
&lt;Shape v-for=&quot;(item, index) in componentData&quot;
    :defaultStyle=&quot;item.style&quot;
    :style=&quot;getShapeStyle(item.style, index)&quot;
    :key=&quot;item.id&quot;
    :active=&quot;item === curComponent&quot;
    :element=&quot;item&quot;
    :zIndex=&quot;index&quot;
&gt;
    &lt;component
        class=&quot;component&quot;
        :is=&quot;item.component&quot;
        :style=&quot;getComponentStyle(item.style)&quot;
        :propValue=&quot;item.propValue&quot;
    /&gt;
&lt;/Shape&gt;
</code></pre>
<p><code>Shape</code> ç»„ä»¶å†…éƒ¨ç»“æ„ï¼š</p>
<pre><code class="language-html">&lt;template&gt;
    &lt;div class=&quot;shape&quot; :class=&quot;{ active: this.active }&quot; @click=&quot;selectCurComponent&quot; @mousedown=&quot;handleMouseDown&quot;
    @contextmenu=&quot;handleContextMenu&quot;&gt;
        &lt;div
            class=&quot;shape-point&quot;
            v-for=&quot;(item, index) in (active? pointList : [])&quot;
            @mousedown=&quot;handleMouseDownOnPoint(item)&quot;
            :key=&quot;index&quot;
            :style=&quot;getPointStyle(item)&quot;&gt;
        &lt;/div&gt;
        &lt;slot&gt;&lt;/slot&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 id="2-ç‚¹å‡»ç»„ä»¶æ—¶å°†-8-ä¸ªå°åœ†ç‚¹æ˜¾ç¤ºå‡ºæ¥">2. ç‚¹å‡»ç»„ä»¶æ—¶ï¼Œå°† 8 ä¸ªå°åœ†ç‚¹æ˜¾ç¤ºå‡ºæ¥ã€‚</h4>
<p>èµ·ä½œç”¨çš„æ˜¯è¿™è¡Œä»£ç  <code>:active=&quot;item === curComponent&quot;</code>ã€‚</p>
<h4 id="3-è®¡ç®—æ¯ä¸ªå°åœ†ç‚¹çš„ä½ç½®">3. è®¡ç®—æ¯ä¸ªå°åœ†ç‚¹çš„ä½ç½®ã€‚</h4>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹è®¡ç®—å°åœ†ç‚¹ä½ç½®çš„ä»£ç ï¼š</p>
<pre><code class="language-js">const pointList = ['t', 'r', 'b', 'l', 'lt', 'rt', 'lb', 'rb']

getPointStyle(point) {
    const { width, height } = this.defaultStyle
    const hasT = /t/.test(point)
    const hasB = /b/.test(point)
    const hasL = /l/.test(point)
    const hasR = /r/.test(point)
    let newLeft = 0
    let newTop = 0

    // å››ä¸ªè§’çš„ç‚¹
    if (point.length === 2) {
        newLeft = hasL? 0 : width
        newTop = hasT? 0 : height
    } else {
        // ä¸Šä¸‹ä¸¤ç‚¹çš„ç‚¹ï¼Œå®½åº¦å±…ä¸­
        if (hasT || hasB) {
            newLeft = width / 2
            newTop = hasT? 0 : height
        }

        // å·¦å³ä¸¤è¾¹çš„ç‚¹ï¼Œé«˜åº¦å±…ä¸­
        if (hasL || hasR) {
            newLeft = hasL? 0 : width
            newTop = Math.floor(height / 2)
        }
    }

    const style = {
        marginLeft: hasR? '-4px' : '-3px',
        marginTop: '-3px',
        left: `${newLeft}px`,
        top: `${newTop}px`,
        cursor: point.split('').reverse().map(m =&gt; this.directionKey[m]).join('') + '-resize',
    }

    return style
}

</code></pre>
<p>è®¡ç®—å°åœ†ç‚¹çš„ä½ç½®éœ€è¦è·å–ä¸€äº›ä¿¡æ¯ï¼š</p>
<ul>
<li>ç»„ä»¶çš„é«˜åº¦ <code>height</code>ã€å®½åº¦ <code>width</code></li>
</ul>
<p>æ³¨æ„ï¼Œå°åœ†ç‚¹ä¹Ÿæ˜¯ç»å¯¹å®šä½çš„ï¼Œç›¸å¯¹äº Shape ç»„ä»¶ã€‚æ‰€ä»¥æœ‰å››ä¸ªå°åœ†ç‚¹çš„ä½ç½®å¾ˆå¥½ç¡®å®šï¼š</p>
<ol>
<li>å·¦ä¸Šè§’çš„å°åœ†ç‚¹ï¼Œåæ ‡ <code>left: 0, top: 0</code></li>
<li>å³ä¸Šè§’çš„å°åœ†ç‚¹ï¼Œåæ ‡ <code>left: width, top: 0</code></li>
<li>å·¦ä¸‹è§’çš„å°åœ†ç‚¹ï¼Œåæ ‡ <code>left: 0, top: height</code></li>
<li>å³ä¸‹è§’çš„å°åœ†ç‚¹ï¼Œåæ ‡ <code>left: width, top: height</code></li>
</ol>
<figure data-type="image" tabindex="3"><img src="https://blog.luyu.icu/post-images/1613498726273.png" alt="" loading="lazy"></figure>
<p>å¦å¤–çš„å››ä¸ªå°åœ†ç‚¹éœ€è¦é€šè¿‡è®¡ç®—é—´æ¥ç®—å‡ºæ¥ã€‚ä¾‹å¦‚å·¦è¾¹ä¸­é—´çš„å°åœ†ç‚¹ï¼Œè®¡ç®—å…¬å¼ä¸º <code>left: 0, top: height / 2</code>ï¼Œå…¶ä»–å°åœ†ç‚¹åŒç†ã€‚</p>
<figure data-type="image" tabindex="4"><img src="https://blog.luyu.icu/post-images/1613498761944.png" alt="" loading="lazy"></figure>
<h4 id="4-ç‚¹å‡»å°åœ†ç‚¹æ—¶å¯ä»¥è¿›è¡Œæ”¾å¤§ç¼©å°æ“ä½œ">4. ç‚¹å‡»å°åœ†ç‚¹æ—¶ï¼Œå¯ä»¥è¿›è¡Œæ”¾å¤§ç¼©å°æ“ä½œã€‚</h4>
<pre><code class="language-js">handleMouseDownOnPoint(point) {
    const downEvent = window.event
    downEvent.stopPropagation()
    downEvent.preventDefault()

    const pos = { ...this.defaultStyle }
    const height = Number(pos.height)
    const width = Number(pos.width)
    const top = Number(pos.top)
    const left = Number(pos.left)
    const startX = downEvent.clientX
    const startY = downEvent.clientY

    // æ˜¯å¦éœ€è¦ä¿å­˜å¿«ç…§
    let needSave = false
    const move = (moveEvent) =&gt; {
        needSave = true
        const currX = moveEvent.clientX
        const currY = moveEvent.clientY
        const disY = currY - startY
        const disX = currX - startX
        const hasT = /t/.test(point)
        const hasB = /b/.test(point)
        const hasL = /l/.test(point)
        const hasR = /r/.test(point)
        const newHeight = height + (hasT? -disY : hasB? disY : 0)
        const newWidth = width + (hasL? -disX : hasR? disX : 0)
        pos.height = newHeight &gt; 0? newHeight : 0
        pos.width = newWidth &gt; 0? newWidth : 0
        pos.left = left + (hasL? disX : 0)
        pos.top = top + (hasT? disY : 0)
        this.$store.commit('setShapeStyle', pos)
    }

    const up = () =&gt; {
        document.removeEventListener('mousemove', move)
        document.removeEventListener('mouseup', up)
        needSave &amp;&amp; this.$store.commit('recordSnapshot')
    }

    document.addEventListener('mousemove', move)
    document.addEventListener('mouseup', up)
}
</code></pre>
<p>å®ƒçš„åŸç†æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>ç‚¹å‡»å°åœ†ç‚¹æ—¶ï¼Œè®°å½•ç‚¹å‡»çš„åæ ‡ xyã€‚</li>
<li>å‡è®¾æˆ‘ä»¬ç°åœ¨å‘ä¸‹æ‹–åŠ¨ï¼Œé‚£ä¹ˆ y åæ ‡å°±ä¼šå¢å¤§ã€‚</li>
<li>ç”¨æ–°çš„ y åæ ‡å‡å»åŸæ¥çš„ y åæ ‡ï¼Œå°±å¯ä»¥çŸ¥é“åœ¨çºµè½´æ–¹å‘çš„ç§»åŠ¨è·ç¦»æ˜¯å¤šå°‘ã€‚</li>
<li>æœ€åå†å°†ç§»åŠ¨è·ç¦»åŠ ä¸ŠåŸæ¥ç»„ä»¶çš„é«˜åº¦ï¼Œå°±å¯ä»¥å¾—å‡ºæ–°çš„ç»„ä»¶é«˜åº¦ã€‚</li>
<li>å¦‚æœæ˜¯æ­£æ•°ï¼Œè¯´æ˜æ˜¯å¾€ä¸‹æ‹‰ï¼Œç»„ä»¶çš„é«˜åº¦åœ¨å¢åŠ ã€‚å¦‚æœæ˜¯è´Ÿæ•°ï¼Œè¯´æ˜æ˜¯å¾€ä¸Šæ‹‰ï¼Œç»„ä»¶çš„é«˜åº¦åœ¨å‡å°‘ã€‚<br>
<img src="https://blog.luyu.icu/post-images/1613498868658.gif" alt="" loading="lazy"></li>
</ol>
<h3 id="6-æ’¤æ¶ˆ-é‡åš">6. æ’¤æ¶ˆã€é‡åš</h3>
<p>æ’¤é”€é‡åšçš„å®ç°åŸç†å…¶å®æŒºç®€å•çš„ï¼Œå…ˆçœ‹ä¸€ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-js">snapshotData: [], // ç¼–è¾‘å™¨å¿«ç…§æ•°æ®
snapshotIndex: -1, // å¿«ç…§ç´¢å¼•
        
undo(state) {
    if (state.snapshotIndex &gt;= 0) {
        state.snapshotIndex--
        store.commit('setComponentData', deepCopy(state.snapshotData[state.snapshotIndex]))
    }
},

redo(state) {
    if (state.snapshotIndex &lt; state.snapshotData.length - 1) {
        state.snapshotIndex++
        store.commit('setComponentData', deepCopy(state.snapshotData[state.snapshotIndex]))
    }
},

setComponentData(state, componentData = []) {
    Vue.set(state, 'componentData', componentData)
},

recordSnapshot(state) {
    // æ·»åŠ æ–°çš„å¿«ç…§
    state.snapshotData[++state.snapshotIndex] = deepCopy(state.componentData)
    // åœ¨ undo è¿‡ç¨‹ä¸­ï¼Œæ·»åŠ æ–°çš„å¿«ç…§æ—¶ï¼Œè¦å°†å®ƒåé¢çš„å¿«ç…§æ¸…ç†æ‰
    if (state.snapshotIndex &lt; state.snapshotData.length - 1) {
        state.snapshotData = state.snapshotData.slice(0, state.snapshotIndex + 1)
    }
},
</code></pre>
<p>ç”¨ä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜ç¼–è¾‘å™¨çš„å¿«ç…§æ•°æ®ã€‚ä¿å­˜å¿«ç…§å°±æ˜¯ä¸åœåœ°æ‰§è¡Œ <code>push()</code> æ“ä½œï¼Œå°†å½“å‰çš„ç¼–è¾‘å™¨æ•°æ®æ¨å…¥ <code>snapshotData</code> æ•°ç»„ï¼Œå¹¶å¢åŠ å¿«ç…§ç´¢å¼• <code>snapshotIndex</code>ã€‚ç›®å‰ä»¥ä¸‹å‡ ä¸ªåŠ¨ä½œä¼šè§¦å‘ä¿å­˜å¿«ç…§æ“ä½œï¼š</p>
<ol>
<li>æ–°å¢ç»„ä»¶</li>
<li>åˆ é™¤ç»„ä»¶</li>
<li>æ”¹å˜å›¾å±‚å±‚çº§</li>
<li>æ‹–åŠ¨ç»„ä»¶ç»“æŸæ—¶</li>
</ol>
<h4 id="æ’¤é”€">æ’¤é”€</h4>
<p>å‡è®¾ç°åœ¨ <code>snapshotData</code> ä¿å­˜äº† 4 ä¸ªå¿«ç…§ã€‚å³ <code>[a, b, c, d]</code>ï¼Œå¯¹åº”çš„å¿«ç…§ç´¢å¼•ä¸º 3ã€‚å¦‚æœè¿™æ—¶è¿›è¡Œäº†æ’¤é”€æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦å°†å¿«ç…§ç´¢å¼•å‡ 1ï¼Œç„¶åå°†å¯¹åº”çš„å¿«ç…§æ•°æ®èµ‹å€¼ç»™ç”»å¸ƒã€‚<br>
ä¾‹å¦‚å½“å‰ç”»å¸ƒæ•°æ®æ˜¯ dï¼Œè¿›è¡Œæ’¤é”€åï¼Œç´¢å¼• -1ï¼Œç°åœ¨ç”»å¸ƒçš„æ•°æ®æ˜¯ cã€‚</p>
<h4 id="é‡åš">é‡åš</h4>
<p>æ˜ç™½äº†æ’¤é”€ï¼Œé‚£é‡åšå°±å¾ˆå¥½ç†è§£äº†ï¼Œå°±æ˜¯å°†å¿«ç…§ç´¢å¼•åŠ  1ï¼Œç„¶åå°†å¯¹åº”çš„å¿«ç…§æ•°æ®èµ‹å€¼ç»™ç”»å¸ƒã€‚<br>
ä¸è¿‡è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œå°±æ˜¯åœ¨æ’¤é”€æ“ä½œä¸­è¿›è¡Œäº†æ–°çš„æ“ä½œï¼Œè¦æ€ä¹ˆåŠå‘¢ï¼Ÿæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>æ–°æ“ä½œæ›¿æ¢å½“å‰å¿«ç…§ç´¢å¼•åé¢æ‰€æœ‰çš„æ•°æ®ã€‚è¿˜æ˜¯ç”¨åˆšæ‰çš„æ•°æ® [a, b, c, d] ä¸¾ä¾‹ï¼Œå‡è®¾ç°åœ¨è¿›è¡Œäº†ä¸¤æ¬¡æ’¤é”€æ“ä½œï¼Œå¿«ç…§ç´¢å¼•å˜ä¸º 1ï¼Œå¯¹åº”çš„å¿«ç…§æ•°æ®ä¸º bï¼Œå¦‚æœè¿™æ—¶è¿›è¡Œäº†æ–°çš„æ“ä½œï¼Œå¯¹åº”çš„å¿«ç…§æ•°æ®ä¸º eã€‚é‚£ e ä¼šæŠŠ cd é¡¶æ‰ï¼Œç°åœ¨çš„å¿«ç…§æ•°æ®ä¸º [a, b, e]ã€‚</li>
<li>ä¸é¡¶æ‰æ•°æ®ï¼Œåœ¨åŸæ¥çš„å¿«ç…§ä¸­æ–°å¢ä¸€æ¡è®°å½•ã€‚ç”¨åˆšæ‰çš„ä¾‹å­ä¸¾ä¾‹ï¼Œe ä¸ä¼šæŠŠ cd é¡¶æ‰ï¼Œè€Œæ˜¯åœ¨ cd ä¹‹å‰æ’å…¥ï¼Œå³å¿«ç…§æ•°æ®å˜ä¸º [a, b, e, c, d]ã€‚</li>
</ol>
<p>æˆ‘é‡‡ç”¨çš„æ˜¯ç¬¬ä¸€ç§æ–¹æ¡ˆã€‚</p>
<figure data-type="image" tabindex="5"><img src="https://blog.luyu.icu/post-images/1613499176409.gif" alt="" loading="lazy"></figure>
<h3 id="7-å¸é™„">7. å¸é™„</h3>
<p>ä»€ä¹ˆæ˜¯å¸é™„ï¼Ÿå°±æ˜¯åœ¨æ‹–æ‹½ç»„ä»¶æ—¶ï¼Œå¦‚æœå®ƒå’Œå¦ä¸€ä¸ªç»„ä»¶çš„è·ç¦»æ¯”è¾ƒæ¥è¿‘ï¼Œå°±ä¼šè‡ªåŠ¨å¸é™„åœ¨ä¸€èµ·ã€‚</p>
<figure data-type="image" tabindex="6"><img src="https://blog.luyu.icu/post-images/1613499297871.gif" alt="" loading="lazy"></figure>
<p>å¸é™„çš„ä»£ç å¤§æ¦‚åœ¨ 300 è¡Œå·¦å³ï¼Œå»ºè®®è‡ªå·±æ‰“å¼€æºç æ–‡ä»¶çœ‹ï¼ˆæ–‡ä»¶è·¯å¾„ï¼š<code>src\components\Editor\MarkLine.vue</code>ï¼‰ã€‚è¿™é‡Œä¸è´´ä»£ç äº†ï¼Œä¸»è¦è¯´è¯´åŸç†æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p>
<h4 id="æ ‡çº¿">æ ‡çº¿</h4>
<p>åœ¨é¡µé¢ä¸Šåˆ›å»º 6 æ¡çº¿ï¼Œåˆ†åˆ«æ˜¯ä¸‰æ¨ªä¸‰ç«–ã€‚è¿™ 6 æ¡çº¿çš„ä½œç”¨æ˜¯å¯¹é½ï¼Œå®ƒä»¬ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°å‘¢ï¼Ÿ</p>
<ol>
<li>ä¸Šä¸‹æ–¹å‘çš„ä¸¤ä¸ªç»„ä»¶å·¦è¾¹ã€ä¸­é—´ã€å³è¾¹å¯¹é½æ—¶ä¼šå‡ºç°ç«–çº¿</li>
<li>å·¦å³æ–¹å‘çš„ä¸¤ä¸ªç»„ä»¶ä¸Šè¾¹ã€ä¸­é—´ã€ä¸‹è¾¹å¯¹é½æ—¶ä¼šå‡ºç°æ¨ªçº¿</li>
</ol>
<p>å…·ä½“çš„è®¡ç®—å…¬å¼ä¸»è¦æ˜¯æ ¹æ®æ¯ä¸ªç»„ä»¶çš„ xy åæ ‡å’Œå®½åº¦é«˜åº¦è¿›è¡Œè®¡ç®—çš„ã€‚ä¾‹å¦‚è¦åˆ¤æ–­ ab ä¸¤ä¸ªç»„ä»¶çš„å·¦è¾¹æ˜¯å¦å¯¹é½ï¼Œåˆ™è¦çŸ¥é“å®ƒä»¬æ¯ä¸ªç»„ä»¶çš„ x åæ ‡ï¼›å¦‚æœè¦çŸ¥é“å®ƒä»¬å³è¾¹æ˜¯å¦å¯¹é½ï¼Œé™¤äº†è¦çŸ¥é“ x åæ ‡ï¼Œè¿˜è¦çŸ¥é“å®ƒä»¬å„è‡ªçš„å®½åº¦ã€‚</p>
<pre><code class="language-js">// å·¦å¯¹é½çš„æ¡ä»¶
a.x == b.x

// å³å¯¹é½çš„æ¡ä»¶
a.x + a.width == b.x + b.width

</code></pre>
<p>åœ¨å¯¹é½çš„æ—¶å€™ï¼Œæ˜¾ç¤ºæ ‡çº¿ã€‚</p>
<p>å¦å¤–è¿˜è¦åˆ¤æ–­ ab ä¸¤ä¸ªç»„ä»¶æ˜¯å¦â€œè¶³å¤Ÿâ€è¿‘ã€‚å¦‚æœè¶³å¤Ÿè¿‘ï¼Œå°±å¸é™„åœ¨ä¸€èµ·ã€‚æ˜¯å¦è¶³å¤Ÿè¿‘è¦é ä¸€ä¸ªå˜é‡æ¥åˆ¤æ–­ï¼š</p>
<pre><code class="language-js">diff: 3, // ç›¸è· dff åƒç´ å°†è‡ªåŠ¨å¸é™„
</code></pre>
<p>å°äºç­‰äº <code>diff</code> åƒç´ åˆ™è‡ªåŠ¨å¸é™„ã€‚</p>
<h4 id="å¸é™„">å¸é™„</h4>
<h5 id="å¸é™„æ•ˆæœæ˜¯æ€ä¹ˆå®ç°çš„å‘¢">å¸é™„æ•ˆæœæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</h5>
<p>å‡è®¾ç°åœ¨æœ‰ ab ç»„ä»¶ï¼Œa ç»„ä»¶åæ ‡ xy éƒ½æ˜¯ 0ï¼Œå®½é«˜éƒ½æ˜¯ 100ã€‚ç°åœ¨å‡è®¾ a ç»„ä»¶ä¸åŠ¨ï¼Œæˆ‘ä»¬æ­£åœ¨æ‹–æ‹½ b ç»„ä»¶ã€‚å½“æŠŠ b ç»„ä»¶æ‹–åˆ°åæ ‡ä¸º<code>x: 0, y: 103</code> æ—¶ï¼Œç”±äº<code>103 - 100 &lt;= 3(diff)</code>ï¼Œæ‰€ä»¥å¯ä»¥åˆ¤å®šå®ƒä»¬å·²ç»æ¥è¿‘å¾—è¶³å¤Ÿè¿‘ã€‚è¿™æ—¶éœ€è¦æ‰‹åŠ¨å°† b ç»„ä»¶çš„ y åæ ‡å€¼è®¾ä¸º 100ï¼Œè¿™æ ·å°±å°† ab ç»„ä»¶å¸é™„åœ¨ä¸€èµ·äº†ã€‚</p>
<figure data-type="image" tabindex="7"><img src="https://blog.luyu.icu/post-images/1613499573207.gif" alt="" loading="lazy"></figure>
<h4 id="ä¼˜åŒ–">ä¼˜åŒ–</h4>
<p>åœ¨æ‹–æ‹½æ—¶å¦‚æœ 6 æ¡æ ‡çº¿éƒ½æ˜¾ç¤ºå‡ºæ¥ä¼šä¸å¤ªç¾è§‚ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åšä¸€ä¸‹ä¼˜åŒ–ï¼Œåœ¨çºµæ¨ªæ–¹å‘ä¸Šæœ€å¤šåªåŒæ—¶æ˜¾ç¤ºä¸€æ¡çº¿ã€‚å®ç°åŸç†å¦‚ä¸‹ï¼š</p>
<ol>
<li>a ç»„ä»¶åœ¨å·¦è¾¹ä¸åŠ¨ï¼Œæˆ‘ä»¬æ‹–ç€ b ç»„ä»¶å¾€ a ç»„ä»¶é è¿‘ã€‚</li>
<li>è¿™æ—¶å®ƒä»¬æœ€å…ˆå¯¹é½çš„æ˜¯ a çš„å³è¾¹å’Œ b çš„å·¦è¾¹ï¼Œæ‰€ä»¥åªéœ€è¦ä¸€æ¡çº¿å°±å¤Ÿäº†ã€‚</li>
<li>å¦‚æœ ab ç»„ä»¶å·²ç»é è¿‘ï¼Œå¹¶ä¸” b ç»„ä»¶ç»§ç»­å¾€å·¦è¾¹ç§»åŠ¨ï¼Œè¿™æ—¶å°±è¦åˆ¤æ–­å®ƒä»¬ä¿©çš„ä¸­é—´æ˜¯å¦å¯¹é½ã€‚</li>
<li>b ç»„ä»¶ç»§ç»­æ‹–åŠ¨ï¼Œè¿™æ—¶éœ€è¦åˆ¤æ–­ a ç»„ä»¶çš„å·¦è¾¹å’Œ b ç»„ä»¶çš„å³è¾¹æ˜¯å¦å¯¹é½ï¼Œä¹Ÿæ˜¯åªéœ€è¦ä¸€æ¡çº¿ã€‚</li>
</ol>
<p>å¯ä»¥å‘ç°ï¼Œå…³é”®çš„åœ°æ–¹æ˜¯æˆ‘ä»¬è¦çŸ¥é“ä¸¤ä¸ªç»„ä»¶çš„æ–¹å‘ã€‚å³ ab ä¸¤ä¸ªç»„ä»¶é è¿‘ï¼Œæˆ‘ä»¬è¦çŸ¥é“åˆ°åº• b æ˜¯åœ¨ a çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ã€‚<br>
è¿™ä¸€ç‚¹å¯ä»¥é€šè¿‡é¼ æ ‡ç§»åŠ¨äº‹ä»¶æ¥åˆ¤æ–­ï¼Œä¹‹å‰åœ¨è®²è§£æ‹–æ‹½çš„æ—¶å€™è¯´è¿‡ï¼Œ<code>mousedown</code> äº‹ä»¶è§¦å‘æ—¶ä¼šè®°å½•èµ·ç‚¹åæ ‡ã€‚æ‰€ä»¥æ¯æ¬¡è§¦å‘ <code>mousemove</code> äº‹ä»¶æ—¶ï¼Œç”¨å½“å‰åæ ‡å‡å»åŸæ¥çš„åæ ‡ï¼Œå°±å¯ä»¥åˆ¤æ–­ç»„ä»¶æ–¹å‘ã€‚ä¾‹å¦‚ x æ–¹å‘ä¸Šï¼Œå¦‚æœ <code>b.x - a.x</code> çš„å·®å€¼ä¸ºæ­£ï¼Œè¯´æ˜æ˜¯ b åœ¨ a å³è¾¹ï¼Œå¦åˆ™ä¸ºå·¦è¾¹ã€‚</p>
<pre><code class="language-js">// è§¦å‘å…ƒç´ ç§»åŠ¨äº‹ä»¶ï¼Œç”¨äºæ˜¾ç¤ºæ ‡çº¿ã€å¸é™„åŠŸèƒ½
// åé¢ä¸¤ä¸ªå‚æ•°ä»£è¡¨é¼ æ ‡ç§»åŠ¨æ–¹å‘
// currY - startY &gt; 0 true è¡¨ç¤ºå‘ä¸‹ç§»åŠ¨ false è¡¨ç¤ºå‘ä¸Šç§»åŠ¨
// currX - startX &gt; 0 true è¡¨ç¤ºå‘å³ç§»åŠ¨ false è¡¨ç¤ºå‘å·¦ç§»åŠ¨
eventBus.$emit('move', this.$el, currY - startY &gt; 0, currX - startX &gt; 0)
</code></pre>
<figure data-type="image" tabindex="8"><img src="https://blog.luyu.icu/post-images/1613499714989.gif" alt="" loading="lazy"></figure>
<h3 id="8-ç»„ä»¶å±æ€§è®¾ç½®">8. ç»„ä»¶å±æ€§è®¾ç½®</h3>
<p>æ¯ä¸ªç»„ä»¶éƒ½æœ‰ä¸€äº›é€šç”¨å±æ€§å’Œç‹¬æœ‰çš„å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ªèƒ½æ˜¾ç¤ºå’Œä¿®æ”¹å±æ€§çš„åœ°æ–¹ã€‚</p>
<pre><code class="language-js">// æ¯ä¸ªç»„ä»¶æ•°æ®å¤§æ¦‚æ˜¯è¿™æ ·
{
    component: 'v-text', // ç»„ä»¶åç§°ï¼Œéœ€è¦æå‰æ³¨å†Œåˆ° Vue
    label: 'æ–‡å­—', // å·¦ä¾§ç»„ä»¶åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„åå­—
    propValue: 'æ–‡å­—', // ç»„ä»¶æ‰€ä½¿ç”¨çš„å€¼
    icon: 'el-icon-edit', // å·¦ä¾§ç»„ä»¶åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„åå­—
    animations: [], // åŠ¨ç”»åˆ—è¡¨
    events: {}, // äº‹ä»¶åˆ—è¡¨
    style: { // ç»„ä»¶æ ·å¼
        width: 200,
        height: 33,
        fontSize: 14,
        fontWeight: 500,
        lineHeight: '',
        letterSpacing: 0,
        textAlign: '',
        color: '',
    },
}
</code></pre>
<figure data-type="image" tabindex="9"><img src="https://blog.luyu.icu/post-images/1613499824580.png" alt="" loading="lazy"></figure>
<p>æˆ‘å®šä¹‰äº†ä¸€ä¸ª <code>AttrList</code> ç»„ä»¶ï¼Œç”¨äºæ˜¾ç¤ºæ¯ä¸ªç»„ä»¶çš„å±æ€§ã€‚</p>
<pre><code class="language-html">&lt;template&gt;
    &lt;div class=&quot;attr-list&quot;&gt;
        &lt;el-form&gt;
            &lt;el-form-item v-for=&quot;(key, index) in styleKeys&quot; :key=&quot;index&quot; :label=&quot;map[key]&quot;&gt;
                &lt;el-color-picker v-if=&quot;key == 'borderColor'&quot; v-model=&quot;curComponent.style[key]&quot;&gt;&lt;/el-color-picker&gt;
                &lt;el-color-picker v-else-if=&quot;key == 'color'&quot; v-model=&quot;curComponent.style[key]&quot;&gt;&lt;/el-color-picker&gt;
                &lt;el-color-picker v-else-if=&quot;key == 'backgroundColor'&quot; v-model=&quot;curComponent.style[key]&quot;&gt;&lt;/el-color-picker&gt;
                &lt;el-select v-else-if=&quot;key == 'textAlign'&quot; v-model=&quot;curComponent.style[key]&quot;&gt;
                    &lt;el-option
                        v-for=&quot;item in options&quot;
                        :key=&quot;item.value&quot;
                        :label=&quot;item.label&quot;
                        :value=&quot;item.value&quot;
                    &gt;&lt;/el-option&gt;
                &lt;/el-select&gt;
                &lt;el-input type=&quot;number&quot; v-else v-model=&quot;curComponent.style[key]&quot; /&gt;
            &lt;/el-form-item&gt;
            &lt;el-form-item label=&quot;å†…å®¹&quot; v-if=&quot;curComponent &amp;&amp; curComponent.propValue &amp;&amp; !excludes.includes(curComponent.component)&quot;&gt;
                &lt;el-input type=&quot;textarea&quot; v-model=&quot;curComponent.propValue&quot; /&gt;
            &lt;/el-form-item&gt;
        &lt;/el-form&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>ä»£ç é€»è¾‘å¾ˆç®€å•ï¼Œå°±æ˜¯éå†ç»„ä»¶çš„ <code>style</code> å¯¹è±¡ï¼Œå°†æ¯ä¸€ä¸ªå±æ€§éå†å‡ºæ¥ã€‚å¹¶ä¸”éœ€è¦æ ¹æ®å…·ä½“çš„å±æ€§ç”¨ä¸åŒçš„ç»„ä»¶æ˜¾ç¤ºå‡ºæ¥ï¼Œä¾‹å¦‚é¢œè‰²å±æ€§ï¼Œéœ€è¦ç”¨é¢œè‰²é€‰æ‹©å™¨æ˜¾ç¤ºï¼›æ•°å€¼ç±»çš„å±æ€§éœ€è¦ç”¨ <code>type=number</code>çš„ <code>input</code> ç»„ä»¶æ˜¾ç¤ºç­‰ç­‰ã€‚<br>
ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ä¿®æ”¹å±æ€§å€¼ï¼Œæˆ‘ä½¿ç”¨ <code>v-model</code> å°†ç»„ä»¶å’Œå€¼ç»‘å®šåœ¨ä¸€èµ·ã€‚</p>
<figure data-type="image" tabindex="10"><img src="https://blog.luyu.icu/post-images/1613499927469.gif" alt="" loading="lazy"></figure>
<h3 id="9-é¢„è§ˆ-ä¿å­˜ä»£ç ">9. é¢„è§ˆã€ä¿å­˜ä»£ç </h3>
<p>é¢„è§ˆå’Œç¼–è¾‘çš„æ¸²æŸ“åŸç†æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«æ˜¯ä¸éœ€è¦ç¼–è¾‘åŠŸèƒ½ã€‚æ‰€ä»¥åªéœ€è¦å°†åŸå…ˆæ¸²æŸ“ç»„ä»¶çš„ä»£ç ç¨å¾®æ”¹ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="language-js">&lt;!--é¡µé¢ç»„ä»¶åˆ—è¡¨å±•ç¤º--&gt;
&lt;Shape v-for=&quot;(item, index) in componentData&quot;
    :defaultStyle=&quot;item.style&quot;
    :style=&quot;getShapeStyle(item.style, index)&quot;
    :key=&quot;item.id&quot;
    :active=&quot;item === curComponent&quot;
    :element=&quot;item&quot;
    :zIndex=&quot;index&quot;
&gt;
    &lt;component
        class=&quot;component&quot;
        :is=&quot;item.component&quot;
        :style=&quot;getComponentStyle(item.style)&quot;
        :propValue=&quot;item.propValue&quot;
    /&gt;
&lt;/Shape&gt;
</code></pre>
<p>ç»è¿‡åˆšæ‰çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ <code>Shape</code> ç»„ä»¶å…·å¤‡äº†æ‹–æ‹½ã€æ”¾å¤§ç¼©å°çš„åŠŸèƒ½ã€‚ç°åœ¨åªéœ€è¦å°† <code>Shape</code> ç»„ä»¶å»æ‰ï¼Œå¤–é¢æ”¹æˆå¥—ä¸€ä¸ªæ™®é€šçš„ <code>DIV</code> å°±å¯ä»¥äº†ï¼ˆå…¶å®ä¸ç”¨è¿™ä¸ª<code>DIV</code> ä¹Ÿè¡Œï¼Œä½†ä¸ºäº†ç»‘å®šäº‹ä»¶è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸Šï¼‰ã€‚</p>
<pre><code class="language-html">&lt;!--é¡µé¢ç»„ä»¶åˆ—è¡¨å±•ç¤º--&gt;
&lt;div v-for=&quot;(item, index) in componentData&quot; :key=&quot;item.id&quot;&gt;
    &lt;component
        class=&quot;component&quot;
        :is=&quot;item.component&quot;
        :style=&quot;getComponentStyle(item.style)&quot;
        :propValue=&quot;item.propValue&quot;
    /&gt;
&lt;/div&gt;
</code></pre>
<p>ä¿å­˜ä»£ç çš„åŠŸèƒ½ä¹Ÿç‰¹åˆ«ç®€å•ï¼Œåªéœ€è¦ä¿å­˜ç”»å¸ƒä¸Šçš„æ•°æ® <code>componentData</code> å³å¯ã€‚ä¿å­˜æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p>
<ol>
<li>ä¿å­˜åˆ°æœåŠ¡å™¨</li>
<li>æœ¬åœ°ä¿å­˜<br>
åœ¨ DEMO ä¸Šæˆ‘ä½¿ç”¨çš„ localStorage ä¿å­˜åœ¨æœ¬åœ°ã€‚</li>
</ol>
<figure data-type="image" tabindex="11"><img src="https://blog.luyu.icu/post-images/1613500069119.gif" alt="" loading="lazy"></figure>
<h3 id="10-ç»‘å®šäº‹ä»¶">10. ç»‘å®šäº‹ä»¶</h3>
<p>æ¯ä¸ªç»„ä»¶æœ‰ä¸€ä¸ª <code>events</code> å¯¹è±¡ï¼Œç”¨äºå­˜å‚¨ç»‘å®šçš„äº‹ä»¶ã€‚ç›®å‰æˆ‘åªå®šä¹‰äº†ä¸¤ä¸ªäº‹ä»¶ï¼š</p>
<ol>
<li>alert äº‹ä»¶</li>
<li>redirect äº‹ä»¶</li>
</ol>
<pre><code class="language-js">// ç¼–è¾‘å™¨è‡ªå®šä¹‰äº‹ä»¶
const events = {
    redirect(url) {
        if (url) {
            window.location.href = url
        }
    },

    alert(msg) {
        if (msg) {
            alert(msg)
        }
    },
}

const mixins = {
    methods: events,
}

const eventList = [
    {
        key: 'redirect',
        label: 'è·³è½¬äº‹ä»¶',
        event: events.redirect,
        param: '',
    },
    {
        key: 'alert',
        label: 'alert äº‹ä»¶',
        event: events.alert,
        param: '',
    },
]

export {
    mixins,
    events,
    eventList,
}

</code></pre>
<p>ä¸è¿‡ä¸èƒ½åœ¨ç¼–è¾‘çš„æ—¶å€™è§¦å‘ï¼Œå¯ä»¥åœ¨é¢„è§ˆçš„æ—¶å€™è§¦å‘ã€‚</p>
<figure data-type="image" tabindex="12"><img src="https://blog.luyu.icu/post-images/1613500164656.gif" alt="" loading="lazy"></figure>
<h4 id="æ·»åŠ äº‹ä»¶">æ·»åŠ äº‹ä»¶</h4>
<p>é€šè¿‡ <code>v-for</code> æŒ‡ä»¤å°†äº‹ä»¶åˆ—è¡¨æ¸²æŸ“å‡ºæ¥ï¼š</p>
<pre><code class="language-html">&lt;el-tabs v-model=&quot;eventActiveName&quot;&gt;
    &lt;el-tab-pane v-for=&quot;item in eventList&quot; :key=&quot;item.key&quot; :label=&quot;item.label&quot; :name=&quot;item.key&quot; style=&quot;padding: 0 20px&quot;&gt;
        &lt;el-input v-if=&quot;item.key == 'redirect'&quot; v-model=&quot;item.param&quot; type=&quot;textarea&quot; placeholder=&quot;è¯·è¾“å…¥å®Œæ•´çš„ URL&quot; /&gt;
        &lt;el-input v-if=&quot;item.key == 'alert'&quot; v-model=&quot;item.param&quot; type=&quot;textarea&quot; placeholder=&quot;è¯·è¾“å…¥è¦ alert çš„å†…å®¹&quot; /&gt;
        &lt;el-button style=&quot;margin-top: 20px;&quot; @click=&quot;addEvent(item.key, item.param)&quot;&gt;ç¡®å®š&lt;/el-button&gt;
    &lt;/el-tab-pane&gt;
&lt;/el-tabs&gt;
</code></pre>
<p>é€‰ä¸­äº‹ä»¶æ—¶å°†äº‹ä»¶æ·»åŠ åˆ°ç»„ä»¶çš„ <code>events</code> å¯¹è±¡ã€‚</p>
<h4 id="è§¦å‘äº‹ä»¶">è§¦å‘äº‹ä»¶</h4>
<p>é¢„è§ˆæˆ–çœŸæ­£æ¸²æŸ“é¡µé¢æ—¶ï¼Œä¹Ÿéœ€è¦åœ¨æ¯ä¸ªç»„ä»¶å¤–é¢å¥—ä¸€å±‚ DIVï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ DIV ä¸Šç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»æ—¶è§¦å‘æˆ‘ä»¬åˆšæ‰æ·»åŠ çš„äº‹ä»¶ã€‚</p>
<pre><code class="language-html">&lt;template&gt;
    &lt;div @click=&quot;handleClick&quot;&gt;
        &lt;component
            class=&quot;conponent&quot;
            :is=&quot;config.component&quot;
            :style=&quot;getStyle(config.style)&quot;
            :propValue=&quot;config.propValue&quot;
        /&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<pre><code class="language-js">handleClick() {
    const events = this.config.events
    // å¾ªç¯è§¦å‘ç»‘å®šçš„äº‹ä»¶
    Object.keys(events).forEach(event =&gt; {
        this[event](events[event])
    })
}
</code></pre>
<h3 id="11-ç»‘å®šåŠ¨ç”»">11. ç»‘å®šåŠ¨ç”»</h3>
<p>åŠ¨ç”»å’Œäº‹ä»¶çš„åŸç†æ˜¯ä¸€æ ·çš„ï¼Œå…ˆå°†æ‰€æœ‰çš„åŠ¨ç”»é€šè¿‡ <code>v-for</code>æŒ‡ä»¤æ¸²æŸ“å‡ºæ¥ï¼Œç„¶åç‚¹å‡»åŠ¨ç”»å°†å¯¹åº”çš„åŠ¨ç”»æ·»åŠ åˆ°ç»„ä»¶çš„ <code>animations</code> æ•°ç»„é‡Œã€‚åŒäº‹ä»¶ä¸€æ ·ï¼Œæ‰§è¡Œçš„æ—¶å€™ä¹Ÿæ˜¯éå†ç»„ä»¶æ‰€æœ‰çš„åŠ¨ç”»å¹¶æ‰§è¡Œã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <a href="https://animate.style/"><code>animate.css</code> </a>åŠ¨ç”»åº“ã€‚</p>
<pre><code class="language-js">// main.js
import '@/styles/animate.css'
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬æå‰å®šä¹‰å¥½æ‰€æœ‰çš„åŠ¨ç”»æ•°æ®ï¼š</p>
<pre><code class="language-js">export default [
    {
        label: 'è¿›å…¥',
        children: [
            { label: 'æ¸æ˜¾', value: 'fadeIn' },
            { label: 'å‘å³è¿›å…¥', value: 'fadeInLeft' },
            { label: 'å‘å·¦è¿›å…¥', value: 'fadeInRight' },
            { label: 'å‘ä¸Šè¿›å…¥', value: 'fadeInUp' },
            { label: 'å‘ä¸‹è¿›å…¥', value: 'fadeInDown' },
            { label: 'å‘å³é•¿è·è¿›å…¥', value: 'fadeInLeftBig' },
            { label: 'å‘å·¦é•¿è·è¿›å…¥', value: 'fadeInRightBig' },
            { label: 'å‘ä¸Šé•¿è·è¿›å…¥', value: 'fadeInUpBig' },
            { label: 'å‘ä¸‹é•¿è·è¿›å…¥', value: 'fadeInDownBig' },
            { label: 'æ—‹è½¬è¿›å…¥', value: 'rotateIn' },
            { label: 'å·¦é¡ºæ—¶é’ˆæ—‹è½¬', value: 'rotateInDownLeft' },
            { label: 'å³é€†æ—¶é’ˆæ—‹è½¬', value: 'rotateInDownRight' },
            { label: 'å·¦é€†æ—¶é’ˆæ—‹è½¬', value: 'rotateInUpLeft' },
            { label: 'å³é€†æ—¶é’ˆæ—‹è½¬', value: 'rotateInUpRight' },
            { label: 'å¼¹å…¥', value: 'bounceIn' },
            { label: 'å‘å³å¼¹å…¥', value: 'bounceInLeft' },
            { label: 'å‘å·¦å¼¹å…¥', value: 'bounceInRight' },
            { label: 'å‘ä¸Šå¼¹å…¥', value: 'bounceInUp' },
            { label: 'å‘ä¸‹å¼¹å…¥', value: 'bounceInDown' },
            { label: 'å…‰é€Ÿä»å³è¿›å…¥', value: 'lightSpeedInRight' },
            { label: 'å…‰é€Ÿä»å·¦è¿›å…¥', value: 'lightSpeedInLeft' },
            { label: 'å…‰é€Ÿä»å³é€€å‡º', value: 'lightSpeedOutRight' },
            { label: 'å…‰é€Ÿä»å·¦é€€å‡º', value: 'lightSpeedOutLeft' },
            { label: 'Yè½´æ—‹è½¬', value: 'flip' },
            { label: 'ä¸­å¿ƒXè½´æ—‹è½¬', value: 'flipInX' },
            { label: 'ä¸­å¿ƒYè½´æ—‹è½¬', value: 'flipInY' },
            { label: 'å·¦é•¿åŠå¾„æ—‹è½¬', value: 'rollIn' },
            { label: 'ç”±å°å˜å¤§è¿›å…¥', value: 'zoomIn' },
            { label: 'å·¦å˜å¤§è¿›å…¥', value: 'zoomInLeft' },
            { label: 'å³å˜å¤§è¿›å…¥', value: 'zoomInRight' },
            { label: 'å‘ä¸Šå˜å¤§è¿›å…¥', value: 'zoomInUp' },
            { label: 'å‘ä¸‹å˜å¤§è¿›å…¥', value: 'zoomInDown' },
            { label: 'å‘å³æ»‘åŠ¨å±•å¼€', value: 'slideInLeft' },
            { label: 'å‘å·¦æ»‘åŠ¨å±•å¼€', value: 'slideInRight' },
            { label: 'å‘ä¸Šæ»‘åŠ¨å±•å¼€', value: 'slideInUp' },
            { label: 'å‘ä¸‹æ»‘åŠ¨å±•å¼€', value: 'slideInDown' },
        ],
    },
    {
        label: 'å¼ºè°ƒ',
        children: [
            { label: 'å¼¹è·³', value: 'bounce' },
            { label: 'é—ªçƒ', value: 'flash' },
            { label: 'æ”¾å¤§ç¼©å°', value: 'pulse' },
            { label: 'æ”¾å¤§ç¼©å°å¼¹ç°§', value: 'rubberBand' },
            { label: 'å·¦å³æ™ƒåŠ¨', value: 'headShake' },
            { label: 'å·¦å³æ‰‡å½¢æ‘‡æ‘†', value: 'swing' },
            { label: 'æ”¾å¤§æ™ƒåŠ¨ç¼©å°', value: 'tada' },
            { label: 'æ‰‡å½¢æ‘‡æ‘†', value: 'wobble' },
            { label: 'å·¦å³ä¸Šä¸‹æ™ƒåŠ¨', value: 'jello' },
            { label: 'Yè½´æ—‹è½¬', value: 'flip' },
        ],
    },
    {
        label: 'é€€å‡º',
        children: [
            { label: 'æ¸éš', value: 'fadeOut' },
            { label: 'å‘å·¦é€€å‡º', value: 'fadeOutLeft' },
            { label: 'å‘å³é€€å‡º', value: 'fadeOutRight' },
            { label: 'å‘ä¸Šé€€å‡º', value: 'fadeOutUp' },
            { label: 'å‘ä¸‹é€€å‡º', value: 'fadeOutDown' },
            { label: 'å‘å·¦é•¿è·é€€å‡º', value: 'fadeOutLeftBig' },
            { label: 'å‘å³é•¿è·é€€å‡º', value: 'fadeOutRightBig' },
            { label: 'å‘ä¸Šé•¿è·é€€å‡º', value: 'fadeOutUpBig' },
            { label: 'å‘ä¸‹é•¿è·é€€å‡º', value: 'fadeOutDownBig' },
            { label: 'æ—‹è½¬é€€å‡º', value: 'rotateOut' },
            { label: 'å·¦é¡ºæ—¶é’ˆæ—‹è½¬', value: 'rotateOutDownLeft' },
            { label: 'å³é€†æ—¶é’ˆæ—‹è½¬', value: 'rotateOutDownRight' },
            { label: 'å·¦é€†æ—¶é’ˆæ—‹è½¬', value: 'rotateOutUpLeft' },
            { label: 'å³é€†æ—¶é’ˆæ—‹è½¬', value: 'rotateOutUpRight' },
            { label: 'å¼¹å‡º', value: 'bounceOut' },
            { label: 'å‘å·¦å¼¹å‡º', value: 'bounceOutLeft' },
            { label: 'å‘å³å¼¹å‡º', value: 'bounceOutRight' },
            { label: 'å‘ä¸Šå¼¹å‡º', value: 'bounceOutUp' },
            { label: 'å‘ä¸‹å¼¹å‡º', value: 'bounceOutDown' },
            { label: 'ä¸­å¿ƒXè½´æ—‹è½¬', value: 'flipOutX' },
            { label: 'ä¸­å¿ƒYè½´æ—‹è½¬', value: 'flipOutY' },
            { label: 'å·¦é•¿åŠå¾„æ—‹è½¬', value: 'rollOut' },
            { label: 'ç”±å°å˜å¤§é€€å‡º', value: 'zoomOut' },
            { label: 'å·¦å˜å¤§é€€å‡º', value: 'zoomOutLeft' },
            { label: 'å³å˜å¤§é€€å‡º', value: 'zoomOutRight' },
            { label: 'å‘ä¸Šå˜å¤§é€€å‡º', value: 'zoomOutUp' },
            { label: 'å‘ä¸‹å˜å¤§é€€å‡º', value: 'zoomOutDown' },
            { label: 'å‘å·¦æ»‘åŠ¨æ”¶èµ·', value: 'slideOutLeft' },
            { label: 'å‘å³æ»‘åŠ¨æ”¶èµ·', value: 'slideOutRight' },
            { label: 'å‘ä¸Šæ»‘åŠ¨æ”¶èµ·', value: 'slideOutUp' },
            { label: 'å‘ä¸‹æ»‘åŠ¨æ”¶èµ·', value: 'slideOutDown' },
        ],
    },
]
</code></pre>
<p>ç„¶åç”¨<code>v-for</code>æŒ‡ä»¤æ¸²æŸ“å‡ºæ¥åŠ¨ç”»åˆ—è¡¨ã€‚<br>
<img src="https://blog.luyu.icu/post-images/1613500419330.gif" alt="" loading="lazy"></p>
<h4 id="æ·»åŠ åŠ¨ç”»">æ·»åŠ åŠ¨ç”»</h4>
<pre><code class="language-html">&lt;el-tabs v-model=&quot;animationActiveName&quot;&gt;
    &lt;el-tab-pane v-for=&quot;item in animationClassData&quot; :key=&quot;item.label&quot; :label=&quot;item.label&quot; :name=&quot;item.label&quot;&gt;
        &lt;el-scrollbar class=&quot;animate-container&quot;&gt;
            &lt;div
                class=&quot;animate&quot;
                v-for=&quot;(animate, index) in item.children&quot;
                :key=&quot;index&quot;
                @mouseover=&quot;hoverPreviewAnimate = animate.value&quot;
                @click=&quot;addAnimation(animate)&quot;
            &gt;
                &lt;div :class=&quot;[hoverPreviewAnimate === animate.value &amp;&amp; animate.value + ' animated']&quot;&gt;
                    {{ animate.label }}
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/el-scrollbar&gt;
    &lt;/el-tab-pane&gt;
&lt;/el-tabs&gt;
</code></pre>
<p>ç‚¹å‡»åŠ¨ç”»å°†è°ƒç”¨ <code>addAnimation(animate)</code> å°†åŠ¨ç”»æ·»åŠ åˆ°ç»„ä»¶çš„ <code>animations</code> æ•°ç»„ã€‚</p>
<h4 id="è§¦å‘åŠ¨ç”»">è§¦å‘åŠ¨ç”»</h4>
<p>è¿è¡ŒåŠ¨ç”»çš„ä»£ç ï¼š</p>
<pre><code class="language-js">export default async function runAnimation($el, animations = []) {
    const play = (animation) =&gt; new Promise(resolve =&gt; {
        $el.classList.add(animation.value, 'animated')
        const removeAnimation = () =&gt; {
            $el.removeEventListener('animationend', removeAnimation)
            $el.removeEventListener('animationcancel', removeAnimation)
            $el.classList.remove(animation.value, 'animated')
            resolve()
        }
            
        $el.addEventListener('animationend', removeAnimation)
        $el.addEventListener('animationcancel', removeAnimation)
    })

    for (let i = 0, len = animations.length; i &lt; len; i++) {
        await play(animations[i])
    }
}
</code></pre>
<p>è¿è¡ŒåŠ¨ç”»éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼šç»„ä»¶å¯¹åº”çš„ <code>DOM</code> å…ƒç´ ï¼ˆåœ¨ç»„ä»¶ä½¿ç”¨ <code>this.$el</code>è·å–ï¼‰å’Œå®ƒçš„åŠ¨ç”»æ•°æ® <code>animations</code>ã€‚å¹¶ä¸”éœ€è¦ç›‘å¬ <code>animationend</code> äº‹ä»¶å’Œ <code>animationcancel</code> äº‹ä»¶ï¼šä¸€ä¸ªæ˜¯åŠ¨ç”»ç»“æŸæ—¶è§¦å‘ï¼Œä¸€ä¸ªæ˜¯åŠ¨ç”»æ„å¤–ç»ˆæ­¢æ—¶è§¦å‘ã€‚<br>
åˆ©ç”¨è¿™ä¸€ç‚¹å†é…åˆ <code>Promise</code> ä¸€èµ·ä½¿ç”¨ï¼Œå°±å¯ä»¥é€ä¸ªè¿è¡Œç»„ä»¶çš„æ¯ä¸ªåŠ¨ç”»äº†ã€‚</p>
<h3 id="12-å¯¼å…¥-psd">12. å¯¼å…¥ PSD</h3>
<p>ç”±äºæ—¶é—´å…³ç³»ï¼Œè¿™ä¸ªåŠŸèƒ½æˆ‘è¿˜æ²¡åšã€‚ç°åœ¨ç®€å•çš„æè¿°ä¸€ä¸‹æ€ä¹ˆåšè¿™ä¸ªåŠŸèƒ½ã€‚é‚£å°±æ˜¯ä½¿ç”¨ <a href="https://github.com/meltingice/psd.js#readme"><code>psd.js</code></a> åº“ï¼Œå®ƒå¯ä»¥è§£æ <code>PSD</code> æ–‡ä»¶ã€‚</p>
<p>ä½¿ç”¨ <code>psd.js</code> åº“è§£æ <code>PSD</code> æ–‡ä»¶å¾—å‡ºçš„æ•°æ®å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">{ children: 
   [ { type: 'group',
       visible: false,
       opacity: 1,
       blendingMode: 'normal',
       name: 'Version D',
       left: 0,
       right: 900,
       top: 0,
       bottom: 600,
       height: 600,
       width: 900,
       children: 
        [ { type: 'layer',
            visible: true,
            opacity: 1,
            blendingMode: 'normal',
            name: 'Make a change and save.',
            left: 275,
            right: 636,
            top: 435,
            bottom: 466,
            height: 31,
            width: 361,
            mask: {},
            text: 
             { value: 'Make a change and save.',
               font: 
                { name: 'HelveticaNeue-Light',
                  sizes: [ 33 ],
                  colors: [ [ 85, 96, 110, 255 ] ],
                  alignment: [ 'center' ] },
               left: 0,
               top: 0,
               right: 0,
               bottom: 0,
               transform: { xx: 1, xy: 0, yx: 0, yy: 1, tx: 456, ty: 459 } },
            image: {} } ] } ],
    document: 
       { width: 900,
         height: 600,
         resources: 
          { layerComps: 
             [ { id: 692243163, name: 'Version A', capturedInfo: 1 },
               { id: 725235304, name: 'Version B', capturedInfo: 1 },
               { id: 730932877, name: 'Version C', capturedInfo: 1 } ],
            guides: [],
            slices: [] } } }

</code></pre>
<p>ä»ä»¥ä¸Šä»£ç å¯ä»¥å‘ç°ï¼Œè¿™äº›æ•°æ®å’Œ <code>css</code> éå¸¸åƒã€‚æ ¹æ®è¿™ä¸€ç‚¹ï¼Œåªéœ€è¦å†™ä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼Œå°†è¿™äº›æ•°æ®è½¬æ¢æˆæˆ‘ä»¬ç»„ä»¶æ‰€éœ€çš„æ•°æ®ï¼Œå°±èƒ½å®ç° <code>PSD</code>æ–‡ä»¶è½¬æˆæ¸²æŸ“ç»„ä»¶çš„åŠŸèƒ½ã€‚ç›®å‰ <a href="https://github.com/huangwei9527/quark-h5"><code>quark-h5</code></a> å’Œ <a href="https://github.com/ly525/luban-h5"><code>luban-h5</code></a> éƒ½æ˜¯è¿™æ ·å®ç°çš„ <code>PSD</code> è½¬æ¢åŠŸèƒ½ã€‚</p>
<h3 id="13-æ‰‹æœºæ¨¡å¼">13. æ‰‹æœºæ¨¡å¼</h3>
<p>ç”±äºç”»å¸ƒæ˜¯å¯ä»¥è°ƒæ•´å¤§å°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ iphone6 çš„åˆ†è¾¨ç‡æ¥å¼€å‘æ‰‹æœºé¡µé¢ã€‚</p>
<figure data-type="image" tabindex="13"><img src="https://blog.luyu.icu/post-images/1613500731839.png" alt="" loading="lazy"></figure>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>ç”±äº DEMO çš„ä»£ç æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥åœ¨è®²è§£æ¯ä¸€ä¸ªåŠŸèƒ½ç‚¹æ—¶ï¼Œæˆ‘åªæŠŠå…³é”®ä»£ç è´´ä¸Šæ¥ã€‚æ‰€ä»¥å¤§å®¶ä¼šå‘ç° DEMO çš„æºç å’Œæˆ‘è´´ä¸Šæ¥çš„ä»£ç ä¼šæœ‰äº›åŒºåˆ«ï¼Œè¯·ä¸å¿…åœ¨æ„ã€‚</p>
<p>å¦å¤–ï¼ŒDEMO çš„æ ·å¼ä¹Ÿæ¯”è¾ƒç®€é™‹ï¼Œä¸»è¦æ˜¯æœ€è¿‘äº‹æƒ…æ¯”è¾ƒå¤šï¼Œæ²¡å¤ªå¤šæ—¶é—´å†™å¥½çœ‹ç‚¹ï¼Œè¯·è§è°…ã€‚</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://blog.luyu.icu/tag/vue/" class="tag">
                    vue
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://blog.luyu.icu/post/xNPEyzRmb/">
                  <h3 class="post-title">
                    vue -- äº‹ä»¶æ€»çº¿ EventBus
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>




  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '6cf547ef31b29bd3b69b',
        clientSecret: '4cca84f474d0153b60aba5a9e73d09a0617d00c6',
        repo: 'panyu97py.github.io',
        owner: 'panyu97py',
        admin: ['panyu97py'],
        proxy: 'https://netnr-proxy.cloudno.de/https://github.com/login/oauth/access_token',
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
